(function(n){n.fn.InfiniteScroll=function(t){var t=n.extend({moreInfoDiv:"#MoreInfoDiv",progressDiv:"#Progress",loadInfoUrl:"/",loginUrl:"/Account/Login",errorHandler:null,completeHandler:null,noMoreInfoHandler:null,pagerSortById:"#sortArea > #pagerSortBy",pagerSortOrderId:"#sortArea > #pagerSortOrder",mainNonAjaxContentDivId:"#mainNonAjaxContent",paramName:"",pageName:"صفحه"},t),u=function(){n(t.progressDiv).css("display","block")},i=function(){n(t.progressDiv).css("display","none")},r=function(){n(t.moreInfoDiv).html("");n(t.mainNonAjaxContentDivId).html("");window.scrollTo(0,0)};return this.each(function(){var e=n(this),f=1,s=document.title,h=function(){if(n(t.pagerSortById).val()){var i="#/page/"+(f+1)+"/"+n(t.pagerSortById).val()+"/"+n(t.pagerSortOrderId).val();try{history.pushState({},"",i)}catch(r){window.location.hash=i}document.title=s+" / "+t.pageName+" "+(f+1)}},o=function(r){r.parent().hide();u();var e=n(t.pagerSortById).val(),o=n(t.pagerSortOrderId).val();n.ajax({type:"POST",url:t.loadInfoUrl,data:JSON.stringify({page:f,pagerSortBy:e,pagerSortOrder:o,name:t.paramName}),contentType:"application/json; charset=utf-8",dataType:"json",complete:function(u,e){var o=u.responseText,s,c;u.status==403?window.location=t.loginUrl:e!=="error"&&o?(o=="no-more-info"?(i(),r.parent().hide(),t.noMoreInfoHandler&&t.noMoreInfoHandler(this)):(s=n(o),c=n(t.moreInfoDiv).append(o),h(),i(),r.parent().show(),t.completeHandler&&t.completeHandler(c,s)),f++):t.errorHandler&&t.errorHandler(this)}})};Path.map("#/page(/:page)(/:sortby)(/:order)").to(function(){var i=this.params.sortby||"date",u=this.params.order||"desc",s=parseInt(this.params.page,10);(s!=f||i!=n(t.pagerSortById).val()||u!=n(t.pagerSortOrderId).val())&&(n(t.pagerSortById).val(i),n(t.pagerSortOrderId).val(u),f=s-1,r(),o(e))});Path.root("#/page/1/date/desc");n(t.pagerSortById).val()&&Path.listen();n(t.pagerSortById+","+t.pagerSortOrderId).change(function(){f=0;r();n(e).click()});n(e).click(function(n){n.originalEvent===undefined&&(f=0);o(e)})})}})(jQuery);
//# sourceMappingURL=jquery.InfiniteScroll.min.js.map
