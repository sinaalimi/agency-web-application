function sitesFavicon() { $("a").each(function () { var r = $(this), n = r.attr("href"), t, i; n && n.match(/^http/) && (n.match(document.domain) || (t = n.replace(/<\S[^><]*>/g, "").split("/")[2], i = '<img src="http://' + t + '/favicon.ico" width="0"  onload="this.width=16;this.height=16;this.style.paddingLeft=\'3px\';this.style.paddingRight=\'1px\';"  style="border:0"  onerror="this.src=\'alternative url\';" />', $(this).prepend(i))) }) } function errorReplace(n) { $.ajax({ type: "POST", url: "api/url", data: "{'image': '" + n.src + "','page':'" + location.href + "'}", contentType: "application/json; charset=utf-8", dataType: "json" }); $(n).attr("src", "alternativeImage") } function preventEnterSubmit(n) { var t, i; if (n.which == 13 && (t = $(n.target), !t.is("textarea") && !t.is(":button,:submit"))) return i = !1, $(this).find(":input:visible:not([disabled],[readonly]), a").each(function () { if (this === n.target) i = !0; else if (i) return $(this).focus(), !1 }), !1 } function makeFileUpload() { $("input[type=file]").fileinput({ showUpload: !1, msgInvalidFileType: "از فایل معتبر استفاده کنید", browseClass: "btn btn-success btn-md", showPreview: !1, browseLabel: "انتخاب", browseIcon: '<i class="fa fa-file"><\/i>', removeClass: "btn btn-danger btn-md", removeLabel: "حذف", removeIcon: '<i class="fa fa-trash"><\/i>' }) } function onquestiontype(n) { $index = 0; var t = "#" + n; $(t).val() == 3 || $(t).val() == 4 ? $("button.option").show() : ($("button.option").hide(), $("div.option").remove()) } var CKEDITOR_BASEPATH = "/Scripts/ckeditor/", warningBeforeLoad, highLightMenu, $index, generateOption; $(function () { highLightMenu(); makeFileUpload(); $(document).on("focus", "input.datepicker", function () { $(this).datepicker({ changeMonth: !0, changeYear: !0, yearRange: "c-100:c+0" }) }); $(document).on("click", ".clearFile", function () { $($(this).data("file")).val("") }); $("form.search").keydown(function (n) { if (n.keyCode == 13) return n.preventDefault(), !1 }); $("[data-toggle='tooltip']").tooltip(); $("#dl-menu").dlmenu({ animationClasses: { classin: "dl-animate-in-1", classout: "dl-animate-out-1" } }); $(document).on("click", "button[id^='remove']", function () { var n = $(this); n.deleteItem({ postUrl: n.data("deleteUrl") }) }); $(document).on("click", "span[id^='ban']", function () { var n = $(this); n.banned({ postUrl: n.data("bannedUrl") }) }); $(".asyncLoad").each(function () { $(this).asyncLoad() }) }); warningBeforeLoad = function () { var n = "اطلاعات دخیره نشده ای در این صفحه دارید و با هدایت به صفحه بعد این اطلاعات را از دست خواهید داد"; $("button:button").click(function () { n = null }); $("input:not(:button,:submit),textarea,select").change(function () { window.onbeforeunload = function () { if (n != null) return n } }); $("input:checkbox,input:radio").click(function () { window.onbeforeunload = function () { if (n != null) return n } }) }; highLightMenu = function () { $(document).ready(function () { $("#navbar-main  a").each(function () { var t = $(this), n = t.attr("href"); n && location.pathname.toLowerCase().split("/")[1] === n.toLowerCase().split("/")[1] && t.closest("li").addClass("active"); n && location.pathname.toLowerCase() === n.toLowerCase() && t.closest("li").addClass("active") }); $("#sidebar  a.first-split").each(function () { var t = $(this), n = t.attr("href"), i = !1; n && location.pathname.toLowerCase().split("/")[1] === n.toLowerCase().split("/")[1] && (t.addClass("active"), i = !0); !i && n && location.pathname.toLowerCase() === n.toLowerCase() && t.addClass("active") }); $("#sidebar  a.second-split").each(function () { var t = $(this), n = t.attr("href"), i = !1; n && location.pathname.toLowerCase().split("/")[2] === n.toLowerCase().split("/")[2] && (t.addClass("active"), i = !0); !i && n && location.pathname.toLowerCase() === n.toLowerCase() && t.addClass("active") }); $("#sidebar  a.thrid-split").each(function () { var t = $(this), n = t.attr("href"), i = !1; n && location.pathname.toLowerCase().split("/")[3] === n.toLowerCase().split("/")[3] && (t.addClass("active"), i = !0); !i && n && location.pathname.toLowerCase() === n.toLowerCase() && t.addClass("active") }) }) }; $index = 0; generateOption = function (n, t, i) { t != 0 && ($index = t + 1); var r = { index: $index }, u = $("#answerOption").html(), f = Mustache.render(u, r); $(f).insertBefore(i); $index++ };